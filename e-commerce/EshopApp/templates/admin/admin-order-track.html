{% extends 'admin/admin_base.html' %}
{% load static %}
{% block body  %}
<link href="{% static 'css/progress-bar.css' %}" rel="stylesheet" type="text/css"/>
<main id="main" class="main">
<section class="section">
<div class="content-wrapper">
  <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card" id="tracking-order">
          <div class="card-body">
            <h4 class="card-title"> Change Order Status </h4>
            <hr />
            <div class="table-responsive">
              <h4>Track Order</h4>
               <ol class="ProgressBar">
                  {% for i in orderstatus %}
                     <li class="ProgressBar-step {% if i.0 <= order.status %}is-complete{% endif %}">
                       <svg class="ProgressBar-icon"><use xlink:href="#checkmark-bold"/></svg>
                       <span class="ProgressBar-stepLabel">{{i.1}}</span>
                     </li>
                  {% endfor %}
               </ol>

              <div class="d-flex justify-content-between align-items-center mt-4">
                    <!-- Left: Back to Order -->
                    <a class="btn btn-outline-primary btn-sm" href="/manage-order/?action=0">
                        <i class="fa fa-arrow-left me-1"></i> Back to All Order
                    </a>

                    <!-- Right: Previous & Next -->
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary btn-sm" id="previous" onclick="changestatus('prev')">
                            <i class="fa fa-arrow-left me-1"></i> Previous
                        </button>
                        <button class="btn btn-outline-success btn-sm" id="advance" onclick="changestatus('next')">
                            Next <i class="fa fa-arrow-right ms-1"></i>
                        </button>
                    </div>
                </div>

               </div>

               <svg xmlns="http://www.w3.org/2000/svg">
                  <symbol id="checkmark-bold" viewBox="0 0 24 24">
                   <path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/>
                 </symbol>
               </svg>
            </div>
          </div>
        </div>
      </div>
</div>
</section>
</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script>
function changestatus(data){
    var orderid = '{{order.id}}';
    var status = '{{order.status}}';
    if(data=='prev'){
        status = (status*1) - 1;
    }else{
        status = (status*1) + 1;
    }
    url = "/admin-order-track/"+orderid+"/?status="+status;
    $.get(url, function(data, status)
    {
        function statusupdate(){
            window.location.reload();
        }
        setTimeout(statusupdate, 150);
    });
}
</script>
{% endblock  %}